<div id="write-body" ng-cloak="" class="" ng-controller="WriteCtrl">

    <div ng-show="user" ng-cloak="" class="row">


        <div id="write-fixed-top">
            <div id="write-fixed-top-container">
            <div class="row">
                    <button ng-click="newDoc()" class="btn btn-jo top-bar-btn">
                        <span class="ion-plus icon"></span>&nbsp;&nbsp;New
                    </button>
                    
                    <button ng-click="openTopicModal()" class="btn btn-jo top-bar-btn">
                        <span class="ion-pricetag icon"></span>&nbsp;&nbsp;Tags
                    </button>

                    <button class="btn top-bar-btn btn-jo" ng-disabled="!currentDoc.body" ng-hide="currentDoc.is_published" ng-click="openPublishModal()">
                      <span class="ion-share icon"></span>&nbsp;&nbsp;Publish 
                    </button>
                    
                    <button ui-sref="mywrdz" class="btn pull-right btn-jo top-bar-btn">
                        <span class="icon ion-folder"></span>&nbsp;&nbsp;My Wrdz
                    </button>
                    

            </div>  
            </div>
        </div>


        <div id="" class="col-sm-2 hidden-xs text-left">
            <div id="write-fixed-left" class="fixed-left">

                

                <div ng-mouseenter="showLeft = true" ng-click="showLeft = !showLeft" class="side-reveal">
                    <span ng-hide="showLeft" class="icon ion-chevron-right"></span>
                </div>
                <br>
                <div ng-show="showLeft" class="slide-left" id="write-left">

                    <div ng-click="openPublishModal()" class="well text-center pub-info-left">

                        <div ng-if="!currentDoc.is_published"><em>Private</em></div>

                        <div ng-if="currentDoc.is_published">
                            
                            <a ng-show="currentDoc.pub_doc.is_visible && currentDoc.pub_doc.is_anon" ui-sref="read.doc({docId: currentDoc.pub_doc._id})">
                        
                                Anonymous
                            </a>
                            
                            <a ng-show="currentDoc.pub_doc.is_visible && !currentDoc.pub_doc.is_anon" ui-sref="read.doc({docId: currentDoc.pub_doc._id})">
                                
                                Public
                            </a>
                   
                            <em ng-hide="currentDoc.pub_doc.is_visible">Not Public</em>
                            <br>
                             <button ng-show="currentDoc.pub_doc.is_visible" ng-click="switchVisible()" class="btn btn-xs">
                                Unpublish
                            </button>
                            <button ng-hide="currentDoc.pub_doc.is_visible" ng-click="switchVisible()" class="btn btn-xs">
                                Re-publish
                            </button>
                        </div>
                    </div>

                    <div ng-if="currentDoc.topics.length !== 0" ng-click="openTopicModal()" class="write-topic-container well">
                        <span ng-repeat="topic in currentDoc.topics">
                            <span class="label label-primary tag-label">{{topic.title}}</span>
                        </span>
                        
                    </div>

                    


            




<!--                     <button ng-click='openPictureModal()' class="btn-jo btn fixed-left-button write-left-button">
                        Picture &nbsp;<span class="icon ion-camera"></span>
                        
                    </button> -->
                    <button ng-if="!currentDoc.is_archived" ng-click="archive(currentDoc._id)" class="btn-jo btn archive-button fixed-left-button write-left-button">
                        Archive &nbsp;<span class="icon ion-ios7-filing-outline"></span>
                        
                    </button>

                    <button ng-if="currentDoc.is_archived" ng-click="archive(currentDoc._id)" class="btn-jo btn archive-button fixed-left-button write-left-button">
                        Un-archive&nbsp; <span class="icon ion-reply"></span>
                        
                    </button>


                    
                </div>





        </div>


    </div>


    <div ng-click="hideRecent()" ng-keydown="hideRecent()" ng-if="currentDoc._id" class="text-center col-sm-8 col-xs-12 pull-left column">
<!--             <div class='visible-xs xs-drop-top'>
                <div class="col-xs-6 pull-right">
                    <div class='dropdown'>
                        
                        <a class='btn btn-jo dropdown-toggle '>
                            <span class="icon ion-chevron-down"></span>
                        </a>  
                        <ul class="dropdown-menu pull-right">
                        <li ng-repeat="recent_doc in user._userDocs | limitTo: 5 | orderBy : '-updated_at'">
                            <a ng-click='switchDoc(recent_doc)'>
                                 <div ng-show='recent_doc.has_title' ng-bind-html="recent_doc.title"></div>
                                <div ng-hide='recent_doc.has_title || !recent_doc.sample'>{{recent_doc.sample | limitTo: 50}}</div>

                            </a>
                        </li>
                      </ul>
                    </div>
                </div>
            </div>

           -->

   
            
            <div id="write-center">


                <div class="show-hide-fade" ng-show="currentDoc.has_title">
                    <div class="" ng-click="switchHasTitle()" id="remove-title-switch"><span class="icon ion-close"></span></div>
                    <div ng-keydown="titleChange()" medium-editor="" options="{{mediumEditorOptionsTitle}}" ng-model="currentDoc.title" id="write-title">
                    </div>
                    <hr>
                </div>

                <div id="title-switch" ng-hide="currentDoc.has_title" ng-click="switchHasTitle()">add title</div>

                <div ng-keydown="bodyChange()" medium-editor="" options="{{mediumEditorOptionsBody}}" ng-model="currentDoc.body" class="" id="write-content">

                </div>
            </div>
        <canvas id="canvas">
            
        </canvas>   




    </div>

    <div class="col-sm-2 hidden-xs pull-right">
        <div id="write-fixed-right" class="fixed-right">



            <div ng-mouseenter="showRecent = true" ng-click="showRecent = !showRecent" class="side-reveal">
                <span ng-hide="showRecent" class="icon ion-chevron-left"></span>
            </div>
            <br>
            <div ng-show="showRecent" class="slide-right" id="recent-docs">
                
                <div ng-repeat="recent_doc in user._userDocs | limitTo: 5 | orderBy : '-updated_at'">

                    <div ng-click="switchDoc(recent_doc)" class="text-right write-last-item">
                        <span ng-show="recent_doc.has_title" ng-bind-html="recent_doc.title"></span>
                        <span ng-hide="recent_doc.has_title || !recent_doc.sample">{{recent_doc.sample | limitTo: 50}}</span>


                    </div>
                </div>
            </div>
        </div>


    </div>

    <div class="visible-xs" id="fixed-bottom-bar">
        <div class="col-xs-3 no-padding"><div ng-click="newDoc()" class="btn btn-jo"><span class="ion-plus icon"></span></div> </div>

        <div class="col-xs-3 no-padding">
                     <div class="btn-jo" ng-click="openTopicModal()">

                        <span class="ion-pricetags icon"></span>

                    </div></div>
        <div class="col-xs-3 no-padding">



           <div ng-if="!currentDoc.is_archived" ng-click="archive(currentDoc._id)" class="btn-jo btn archive-button">
                <span class="icon ion-ios7-filing-outline"></span>
                
            </div>

            <div ng-if="currentDoc.is_archived" ng-click="archive(currentDoc._id)" class="btn-jo btn archive-button">
                <span class="icon ion-reply"></span>
                
            </div>
        </div>
        <div class="col-xs-3 no-padding"><div ng-hide="currentDoc.is_published" ng-click="openPublishModal()" class="btn btn-jo">
                <span class="icon ion-share"></span>
            </div></div>
    </div>
    

</div>


</div>
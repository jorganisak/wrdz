<div id="write-body" class='' ng-controller='WriteCtrl'>
    <div ng-hide='user' class="row">No user, sign in and shit!</div>
    <div ng-show='user' class="row">
        <div class="">

            <div class="">


                <div id='' class="write-column-left medium-2 show-for-medium-up text-left column">
                    <button ng-click='newDoc()' class=''><span class="ion-compose icon"></span> &nbsp;&nbsp;&nbsp;New</button>   


                    <button ng-click='publishBox = !publishBox'><span class="ion-eye icon"></span> &nbsp;&nbsp;&nbsp;Publish</button>

                    <div ng-show="publishBox" class="panel publish-box">
                        <div ng-click="publishBox = !publishBox" class=" right icon ion-close"></div>
                        <button ng-click='publish(false)'class=''>As {{user.username}}</button>
                        <button ng-click='publish(true)' class=''>Anonymously</button>
                    </div>

                    <button  ng-click='tagBox = !tagBox'><span class="ion-pricetags icon"></span> &nbsp;&nbsp;&nbsp; Tags</button>


                    <div id='write-box' ng-show='tagBox' class="panel">
                        <div ng-click="tagBox = !tagBox" class="  right icon ion-close"></div>

                        <div class="row write-add-tag-box">
                            <div class="medium-10 column">
                                <form ng-submit="newTag(newTagTitle)">

                                    <input ng-model='newTagTitle' type="text">
                                </form>
                            </div>
                            <div class="medium-1 right">
                                <span ng-click='newTag(newTagTitle)' ng-disabled='!newTagTitle' class="icon ion-plus-circled"></span>
                            </div>

                        </div>

                        <span ng-repeat='tag in currentDoc.tags'>

                            <span class="label tag-label">{{tag.title}} <span ng-click='removeTag(tag._id)' class="icon tag-remove-x ion-close"></span></span>
                        </span>



                        <div class='row '>
                            <div class="medium-12 write-recent-tag-title column">

                                <em>Your top tags</em>
                            </div>

                        </div>
                        <span ng-repeat="recentTag in user.tags | orderBy: '-_docs.length' | limitTo: 6 ">

                            <span class="label tag-label">{{recentTag.title}}<span ng-click='newTag(recentTag.title)' class="icon tag-add-plus ion-plus"></span></span>
                        </span>



                    </div>

                </div>


                <div class="medium-6 column text-center" ng-hide='currentDoc._id'>Nothing selected! <br> Create new </div>


                
                <div ng-show='currentDoc._id'  class="text-center medium-8 left column ">

                    <div id="write-center">
                        
                        

                        <div class='show-hide-fade' ng-show="hasTitle">
                            <div class="" ng-click='switchHasTitle()' id="remove-title-switch"><span class="icon ion-close"></span></div>
                            <div medium-editor options='{"placeholder": "Title", "disableToolbar": true, "disableReturn":true}' ng-model='currentDoc.title' id="write-title">
                            </div>
                            

                        </div>

                        <div id="title-switch"  ng-hide="hasTitle" ng-click='switchHasTitle()'>add title</div>

                        <div medium-editor options='{"placeholder": "Write here", "buttons": ["bold", "italic", "anchor", "header1", "header2","quote","orderedlist", "unorderedlist" ], "disableToolbar": false, "forcePlainText" : true, "targetBlank": true}' ng-model='currentDoc.body'  class='text-justify' id="write-content">

                        </div>
                    </div>


                    

                </div>

                <div class=" write-column-right medium-2 right column">
                    <div ng-repeat="recent_doc in user._userDocs | limitTo: 10 | orderBy : '-updated_at'">

                        <div ng-click='switchDoc(recent_doc)' class="text-right write-last-item">
                            <span ng-bind-html="recent_doc.title"></span>
                            <div ng-hide="recent_doc.title"><em>No Title</em></div>
                        </div>
                    </div>


                    
                </div>

            </div>


        </div>
    </div>


</div>